"use strict";(self["webpackChunkweek_6_project"]=self["webpackChunkweek_6_project"]||[]).push([[532],{7532:function(t,a,e){e.r(a),e.d(a,{default:function(){return T}});var s=e(6252),i=e(3577);const l={class:"container"},n=(0,s._)("h2",{class:"my-5 ms-2 fw-bold text-center"},"產品管理列表",-1),d={class:"text-end mt-4"},c={class:"row py-3"},o={class:"col-xl-6"},r={class:"table mt-4"},p=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{width:"100"},"分類"),(0,s._)("th",null,"產品名稱"),(0,s._)("th",{width:"100"},"原價"),(0,s._)("th",{width:"100"},"售價"),(0,s._)("th",{width:"100"},"是否啟用"),(0,s._)("th",{width:"100"},"功能按鈕")])],-1),u={class:"fw-bold text-decoration-underline"},h={class:"text-secondary fw-light"},m={class:"fw-bold"},D={key:0,class:"text-success"},_={key:1,class:"text-danger"},g=["data-id"],w=["data-detail-id","onClick"],y=["data-edit-id","onClick"],b=["data-delete-id","onClick"],k={class:"col-xl-6"};function x(t,a,e,x,f,v){const z=(0,s.up)("ProductDetail");return(0,s.wg)(),(0,s.iD)("div",l,[n,(0,s._)("div",d,[(0,s._)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=t=>v.modalOn("new"))}," 建立新的產品 ")]),(0,s._)("div",c,[(0,s._)("div",o,[(0,s._)("table",r,[p,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.productsList,((t,a)=>((0,s.wg)(),(0,s.iD)("tr",{key:a},[(0,s._)("td",null,(0,i.zw)(t.category),1),(0,s._)("td",u,(0,i.zw)(t.title),1),(0,s._)("td",h,(0,i.zw)(t.origin_price),1),(0,s._)("td",m,(0,i.zw)(t.price),1),(0,s._)("td",null,[t.is_enabled?((0,s.wg)(),(0,s.iD)("span",D,"啟用")):((0,s.wg)(),(0,s.iD)("span",_,"未啟用"))]),(0,s._)("td",null,[(0,s._)("div",{class:"btn-group","data-id":a},[(0,s._)("button",{type:"button",class:"btn btn-outline-success btn-sm","data-detail-id":a,onClick:a=>v.productDetail(t)}," 細節 ",8,w),(0,s._)("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-edit-id":a,onClick:a=>v.modalOn("edit",t)}," 編輯 ",8,y),(0,s._)("button",{type:"button",class:"btn btn-outline-danger btn-sm","data-delete-id":a,onClick:a=>v.modalOn("delete",t)}," 刪除 ",8,b)],8,g)])])))),128))])])]),(0,s._)("div",k,[(0,s.Wm)(z)])])])}function f(t){return{all:t=t||new Map,on:function(a,e){var s=t.get(a);s?s.push(e):t.set(a,[e])},off:function(a,e){var s=t.get(a);s&&(e?s.splice(s.indexOf(e)>>>0,1):t.set(a,[]))},emit:function(a,e){var s=t.get(a);s&&s.slice().map((function(t){t(e)})),(s=t.get("*"))&&s.slice().map((function(t){t(a,e)}))}}}const v=f();var z=v;const O={key:0},U={class:"card mb-3"},C=["src"],$={class:"card-body"},N={class:"card-title"},L={class:"badge bg-primary ms-2"},j={class:"card-text"},H={class:"card-text"},K={class:"d-flex"},P={class:"card-text me-2"},Y={class:"card-text text-secondary"},Z={key:0},q=["src"],A={key:1,class:"text-secondary"},M=(0,s.Uk)(" 請點擊"),W=(0,s._)("span",{class:"text-danger"},"呈現細節",-1),B=(0,s.Uk)("按鈕，查看商品細節 "),E=[M,W,B];function F(t,a,e,l,n,d){return e.detailDisplay?((0,s.wg)(),(0,s.iD)("div",O,[(0,s._)("div",U,[(0,s._)("img",{src:e.productDisplay.imageUrl,class:"card-img-top primary-image",alt:"主圖"},null,8,C),(0,s._)("div",$,[(0,s._)("h5",N,[(0,s.Uk)((0,i.zw)(e.productDisplay.title),1),(0,s._)("span",L,(0,i.zw)(e.productDisplay.category),1)]),(0,s._)("p",j,"商品描述："+(0,i.zw)(e.productDisplay.description),1),(0,s._)("p",H,"商品內容："+(0,i.zw)(e.productDisplay.content),1),(0,s._)("div",K,[(0,s._)("p",P,(0,i.zw)(e.productDisplay.price),1),(0,s._)("p",Y,[(0,s._)("del",null,(0,i.zw)(e.productDisplay.origin_price),1)]),(0,s.Uk)(" "+(0,i.zw)(e.productDisplay.unit)+" / 元 ",1)])])]),e.productDisplay.id?((0,s.wg)(),(0,s.iD)("div",Z,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.productDisplay.imagesUrl,((t,a)=>((0,s.wg)(),(0,s.iD)("img",{src:t,key:a,alt:"",class:"images m-2"},null,8,q)))),128))])):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("p",A,E))}var G={data(){return{}},props:["productDisplay","detailDisplay"]},I=e(3744);const J=(0,I.Z)(G,[["render",F]]);var Q=J,R={data(){return{bsNewproduct:null,bsDeleteproduct:null,productsList:null,current_page:1,has_next:!0,has_pre:!1,total_pages:1,emitData:{productDisplay:{imagesUrl:[]},newOn:!1,detailDisplay:!1,deleteOn:!1}}},watch:{emitData:{handler(){z.emit("emitData",this.emitData)},deep:!0}},components:{ProductDetail:Q},methods:{getData(t=1){this.$http.get(`https://vue3-course-api.hexschool.io/v2//api/brunoyu2022/admin/products?page=${t}`).then((t=>{console.log(t.data.products),this.productsList=t.data.products,console.log(t.data.pagination),this.current_page=t.data.pagination.current_page,this.has_next=t.data.pagination.has_next,this.has_pre=t.data.pagination.has_pre,this.total_pages=t.data.pagination.total_pages})).catch((t=>{console.dir(t),alert(`${t.data.message}`)}))},modalOn(t,a){"edit"===t?(this.emitData.productDisplay={imagesUrl:[]},this.emitData.detailDisplay=!1,this.emitData.productDisplay=a,this.bsNewproduct.show()):"new"===t?(this.emitData.productDisplay={imagesUrl:[]},this.emitData.newOn=!0,this.emitData.detailDisplay=!1,this.emitData.deleteOn=!1,this.bsNewproduct.show()):"delete"===t&&(this.emitData.productDisplay={imagesUrl:[]},this.emitData.productDisplay=a,this.emitData.newOn=!1,this.emitData.detailDisplay=!1,this.emitData.deleteOn=!0,this.bsDeleteproduct.show())},productDetail(t){this.emitData.productDisplay=t,this.emitData.detailDisplay=!0}},mounted(){z.on("bsNewproduct",(t=>{this.bsNewproduct=t})),z.on("bsDeleteproduct",(t=>{this.bsDeleteproduct=t}));const t=document.cookie.replace(/(?:(?:^|.*;\s*)hextoken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t,this.$http.post("https://vue3-course-api.hexschool.io/v2//api/user/check").then((t=>{prompt("成功登入",t),this.getData()})).catch((t=>{console.dir(t),alert(`${t.data.message}`),window.location.href="index.html"}))}};const S=(0,I.Z)(R,[["render",x]]);var T=S}}]);
//# sourceMappingURL=532.83c06fa6.js.map